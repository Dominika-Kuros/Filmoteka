const e=document.querySelector(".footer-highlight"),t=document.querySelector(".modal-devs"),a=document.querySelectorAll("[data-slider-button]"),c=[...document.querySelectorAll(".modal-devs__slide")];function d(){t.classList.add("modal-devs-hidden")}function n(e){const t=document.querySelector(".modal-devs__slide[data-active]");if(!t)return;let a=c.indexOf(t)+e;a<0&&(a=c.length-1),a>=c.length&&(a=0),t.removeAttribute("data-active"),c[a].setAttribute("data-active","")}a.forEach((e=>{e.addEventListener("click",(()=>{const t="next"===e.dataset.sliderButton?1:-1,a=e.closest(".modal-devs__slider").querySelector(".modal-devs__slide-list"),c=a.querySelector("[data-active]");let d=[...a.children].indexOf(c)+t;d<0&&(d=a.children.length-1),d>=a.children.length&&(d=0),a.children[d].dataset.active=!0,delete c.dataset.active}))})),a.forEach((e=>{e.addEventListener("click",(()=>{n("next"===e.dataset.sliderButton?1:-1)}))})),window.addEventListener("keydown",(e=>{"ArrowLeft"===e.key?n(-1):"ArrowRight"===e.key&&n(1)})),e.addEventListener("click",(function(){t.classList.remove("modal-devs-hidden")})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&d()})),window.addEventListener("click",(e=>{e.target.classList.contains("modal-devs")&&d()}));const i=JSON.parse(localStorage.getItem("queue")),o=JSON.parse(localStorage.getItem("watched")),s=document.querySelector("#queue-btn"),r=document.querySelector("#watched-btn");function l(e,t=2){const a=document.querySelector("#library-gallery");a.innerHTML="",e.forEach((async e=>{const c=(await async function(e){const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=3453ae595a5d53cbc877c6d05de8a002`);return(await t.json()).genres}(e.id)).map((e=>e.name)),d=(c.length>t?c.slice(0,t).concat(["other"]):c).join(", "),n=`\n      <div data-id=${e.id} class="movie-card">\n        <div class="movie-card__placeholder"><img class="movie-card__image" src="https://image.tmdb.org/t/p/w500${e.poster_path}" alt="${e.title}" width="395" height="574"></div>\n        <h2 class="movie-card__tittle">${e.title}</h2>\n        <p class="movie-card__info"> \n        <span class="movie-card__overview">${d}</span> | <span class="movie-card__realease-date">${e.release_date.slice(0,4)}\n    `;a.insertAdjacentHTML("beforeend",n)})),a.addEventListener("click",(e=>{null!==e.target.closest(".movie-card")&&(showLoader(),showModal(),v(e.target.closest(".movie-card").dataset.id).then((e=>{renderModal(e),removeLoader()})))}))}s.addEventListener("click",(async()=>{l(await m(i))})),r.addEventListener("click",(async()=>{l(await m(o))}));const v=async e=>{try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=964358699754c21d74c014b561cf196c&language=en-US`);return await t.json()}catch(e){console.log(e)}};async function m(e){return await Promise.all(e.map((async e=>await v(e))))}
//# sourceMappingURL=library.ce269f71.js.map
